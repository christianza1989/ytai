{% extends "admin_base.html" %}

{% block title %}System Settings - Admin Panel{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{{ url_for('dashboard') }}">Dashboard</a></li>
<li class="breadcrumb-item active">Settings</li>
{% endblock %}

{% block content %}
<!-- Header -->
<div class="row mb-4">
    <div class="col-md-8">
        <h1 class="h3 mb-0">
            <i class="fas fa-sliders-h text-primary me-2"></i>
            System Settings
        </h1>
        <p class="text-muted">Configure system preferences and advanced options</p>
    </div>
    <div class="col-md-4 text-end">
        <button class="btn btn-outline-success" onclick="backupSettings()">
            <i class="fas fa-download me-1"></i>
            Backup Settings
        </button>
    </div>
</div>

<!-- Settings Tabs -->
<div class="row">
    <div class="col-12">
        <ul class="nav nav-tabs" id="settingsTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#general" type="button" role="tab">
                    <i class="fas fa-cog me-2"></i>General
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="generation-tab" data-bs-toggle="tab" data-bs-target="#generation" type="button" role="tab">
                    <i class="fas fa-magic me-2"></i>Generation
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="storage-tab" data-bs-toggle="tab" data-bs-target="#storage" type="button" role="tab">
                    <i class="fas fa-hdd me-2"></i>Storage
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="notifications-tab" data-bs-toggle="tab" data-bs-target="#notifications" type="button" role="tab">
                    <i class="fas fa-bell me-2"></i>Notifications
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="youtube-tab" data-bs-toggle="tab" data-bs-target="#youtube" type="button" role="tab">
                    <i class="fab fa-youtube me-2 text-danger"></i>YouTube
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="thumbnails-tab" data-bs-toggle="tab" data-bs-target="#thumbnails" type="button" role="tab">
                    <i class="fas fa-image me-2"></i>Thumbnails
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="seo-tab" data-bs-toggle="tab" data-bs-target="#seo" type="button" role="tab">
                    <i class="fas fa-search me-2"></i>SEO
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="automation-tab" data-bs-toggle="tab" data-bs-target="#automation" type="button" role="tab">
                    <i class="fas fa-robot me-2"></i>Automation
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="security-tab" data-bs-toggle="tab" data-bs-target="#security" type="button" role="tab">
                    <i class="fas fa-shield-alt me-2"></i>Security
                </button>
            </li>
        </ul>

        <div class="tab-content" id="settingsTabsContent">
            <!-- General Settings -->
            <div class="tab-pane fade show active" id="general" role="tabpanel">
                <div class="card border-0">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-8">
                                <form id="generalSettingsForm">
                                    <!-- System Preferences -->
                                    <div class="mb-4">
                                        <h5><i class="fas fa-desktop me-2 text-primary"></i>System Preferences</h5>
                                        <hr>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="systemTimezone" class="form-label">Timezone</label>
                                                <select class="form-select" id="systemTimezone">
                                                    <option value="UTC">UTC</option>
                                                    <option value="Europe/London">Europe/London</option>
                                                    <option value="America/New_York">America/New_York</option>
                                                    <option value="Asia/Tokyo">Asia/Tokyo</option>
                                                    <option value="Europe/Vilnius" selected>Europe/Vilnius</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="systemLanguage" class="form-label">Language</label>
                                                <select class="form-select" id="systemLanguage">
                                                    <option value="lt" selected>Lietuvių</option>
                                                    <option value="en">English</option>
                                                    <option value="de">Deutsch</option>
                                                    <option value="es">Español</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="defaultMode" class="form-label">Default Generation Mode</label>
                                                <select class="form-select" id="defaultMode">
                                                    <option value="mock" selected>Mock (Test Mode)</option>
                                                    <option value="real">Real (Production)</option>
                                                    <option value="hybrid">Hybrid</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="maxConcurrentJobs" class="form-label">Max Concurrent Jobs</label>
                                                <input type="number" class="form-control" id="maxConcurrentJobs" min="1" max="10" value="3">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- UI Preferences -->
                                    <div class="mb-4">
                                        <h5><i class="fas fa-paint-brush me-2 text-success"></i>UI Preferences</h5>
                                        <hr>
                                        
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-check form-switch mb-3">
                                                    <input class="form-check-input" type="checkbox" id="darkMode">
                                                    <label class="form-check-label" for="darkMode">
                                                        Dark Mode
                                                    </label>
                                                </div>
                                                
                                                <div class="form-check form-switch mb-3">
                                                    <input class="form-check-input" type="checkbox" id="compactView">
                                                    <label class="form-check-label" for="compactView">
                                                        Compact View
                                                    </label>
                                                </div>
                                                
                                                <div class="form-check form-switch mb-3">
                                                    <input class="form-check-input" type="checkbox" id="autoRefresh" checked>
                                                    <label class="form-check-label" for="autoRefresh">
                                                        Auto-refresh Dashboard
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="refreshInterval" class="form-label">Refresh Interval (seconds)</label>
                                                <input type="range" class="form-range" id="refreshInterval" min="5" max="60" value="30">
                                                <div class="d-flex justify-content-between">
                                                    <small class="text-muted">5s</small>
                                                    <small class="text-muted" id="refreshValue">30s</small>
                                                    <small class="text-muted">60s</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                        <button type="button" class="btn btn-outline-secondary me-md-2" onclick="resetGeneralSettings()">
                                            <i class="fas fa-undo me-1"></i>Reset
                                        </button>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save me-1"></i>Save General Settings
                                        </button>
                                    </div>
                                </form>
                            </div>
                            
                            <div class="col-lg-4">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6><i class="fas fa-info-circle text-info me-2"></i>System Information</h6>
                                        <ul class="list-unstyled mb-0">
                                            <li><strong>Version:</strong> v1.2.0</li>
                                            <li><strong>Build:</strong> 2025.09.13</li>
                                            <li><strong>Python:</strong> 3.12.11</li>
                                            <li><strong>Platform:</strong> Linux x86_64</li>
                                            <li><strong>Uptime:</strong> 2h 15m</li>
                                        </ul>
                                        
                                        <hr>
                                        
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-outline-info btn-sm" onclick="checkUpdates()">
                                                <i class="fas fa-sync-alt me-1"></i>Check Updates
                                            </button>
                                            <button class="btn btn-outline-warning btn-sm" onclick="systemDiagnostics()">
                                                <i class="fas fa-stethoscope me-1"></i>Run Diagnostics
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generation Settings -->
            <div class="tab-pane fade" id="generation" role="tabpanel">
                <div class="card border-0">
                    <div class="card-body">
                        <form id="generationSettingsForm">
                            <div class="row">
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-music me-2 text-primary"></i>Default Parameters</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <label for="defaultGenre" class="form-label">Default Genre</label>
                                        <select class="form-select" id="defaultGenre">
                                            <option value="Lo-Fi Hip Hop" selected>Lo-Fi Hip Hop</option>
                                            <option value="Ambient">Ambient</option>
                                            <option value="Jazz">Jazz</option>
                                            <option value="Electronic">Electronic</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultDuration" class="form-label">Default Duration (seconds)</label>
                                        <input type="number" class="form-control" id="defaultDuration" min="30" max="300" value="180">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultTempo" class="form-label">Default Tempo (BPM)</label>
                                        <input type="number" class="form-control" id="defaultTempo" min="60" max="200" value="120">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="autoGenerateCovers" checked>
                                            <label class="form-check-label" for="autoGenerateCovers">
                                                Auto-generate Album Covers
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="autoCreateVideos">
                                            <label class="form-check-label" for="autoCreateVideos">
                                                Auto-create Video Files
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-cogs me-2 text-success"></i>Quality Settings</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <label for="audioQuality" class="form-label">Audio Quality</label>
                                        <select class="form-select" id="audioQuality">
                                            <option value="standard">Standard (128 kbps)</option>
                                            <option value="high" selected>High (192 kbps)</option>
                                            <option value="premium">Premium (320 kbps)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="imageResolution" class="form-label">Cover Art Resolution</label>
                                        <select class="form-select" id="imageResolution">
                                            <option value="512">512x512</option>
                                            <option value="1024" selected>1024x1024</option>
                                            <option value="2048">2048x2048</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="videoQuality" class="form-label">Video Quality</label>
                                        <select class="form-select" id="videoQuality">
                                            <option value="720p" selected>HD (720p)</option>
                                            <option value="1080p">Full HD (1080p)</option>
                                            <option value="4k">4K (2160p)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="retryAttempts" class="form-label">Retry Attempts on Failure</label>
                                        <input type="number" class="form-control" id="retryAttempts" min="0" max="5" value="2">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12">
                                    <h5><i class="fas fa-clock me-2 text-warning"></i>Timeout Settings</h5>
                                    <hr>
                                    
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <label for="apiTimeout" class="form-label">API Request Timeout (seconds)</label>
                                            <input type="number" class="form-control" id="apiTimeout" min="10" max="300" value="60">
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label for="generationTimeout" class="form-label">Generation Timeout (minutes)</label>
                                            <input type="number" class="form-control" id="generationTimeout" min="5" max="60" value="15">
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label for="batchTimeout" class="form-label">Batch Timeout (hours)</label>
                                            <input type="number" class="form-control" id="batchTimeout" min="1" max="24" value="6">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <button type="button" class="btn btn-outline-secondary me-md-2" onclick="resetGenerationSettings()">
                                    <i class="fas fa-undo me-1"></i>Reset
                                </button>
                                <button type="submit" class="btn btn-success">
                                    <i class="fas fa-save me-1"></i>Save Generation Settings
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Storage Settings -->
            <div class="tab-pane fade" id="storage" role="tabpanel">
                <div class="card border-0">
                    <div class="card-body">
                        <div class="row mb-4">
                            <div class="col-lg-6">
                                <h5><i class="fas fa-hdd me-2 text-info"></i>Storage Overview</h5>
                                <hr>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>Total Used Space</span>
                                        <span class="fw-bold">2.4 GB</span>
                                    </div>
                                    <div class="progress mb-2">
                                        <div class="progress-bar bg-info" style="width: 24%"></div>
                                    </div>
                                    <small class="text-muted">24% of 10 GB allocated</small>
                                </div>
                                
                                <div class="row text-center">
                                    <div class="col-4">
                                        <div class="fw-bold text-primary">1.8 GB</div>
                                        <small class="text-muted">Audio Files</small>
                                    </div>
                                    <div class="col-4">
                                        <div class="fw-bold text-success">0.4 GB</div>
                                        <small class="text-muted">Images</small>
                                    </div>
                                    <div class="col-4">
                                        <div class="fw-bold text-warning">0.2 GB</div>
                                        <small class="text-muted">Videos</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-lg-6">
                                <h5><i class="fas fa-trash me-2 text-danger"></i>Cleanup Actions</h5>
                                <hr>
                                
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-warning" onclick="cleanupTempFiles()">
                                        <i class="fas fa-broom me-1"></i>
                                        Clean Temporary Files (45 MB)
                                    </button>
                                    <button class="btn btn-outline-info" onclick="optimizeStorage()">
                                        <i class="fas fa-compress-arrows-alt me-1"></i>
                                        Optimize Storage
                                    </button>
                                    <button class="btn btn-outline-danger" onclick="confirmFullCleanup()">
                                        <i class="fas fa-trash-alt me-1"></i>
                                        Delete Old Projects (>30 days)
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <form id="storageSettingsForm">
                            <div class="row">
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-folder me-2 text-primary"></i>Directory Settings</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <label for="outputDirectory" class="form-label">Output Directory</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="outputDirectory" value="/home/user/webapp/output">
                                            <button class="btn btn-outline-secondary" type="button">
                                                <i class="fas fa-folder-open"></i>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="tempDirectory" class="form-label">Temporary Directory</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="tempDirectory" value="/home/user/webapp/temp">
                                            <button class="btn btn-outline-secondary" type="button">
                                                <i class="fas fa-folder-open"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-clock me-2 text-warning"></i>Retention Policies</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <label for="projectRetention" class="form-label">Keep Projects (days)</label>
                                        <input type="number" class="form-control" id="projectRetention" min="1" max="365" value="90">
                                        <div class="form-text">0 = Keep forever</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="tempRetention" class="form-label">Keep Temp Files (hours)</label>
                                        <input type="number" class="form-control" id="tempRetention" min="1" max="168" value="24">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="autoCleanup" checked>
                                            <label class="form-check-label" for="autoCleanup">
                                                Auto Cleanup
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <button type="button" class="btn btn-outline-secondary me-md-2" onclick="resetStorageSettings()">
                                    <i class="fas fa-undo me-1"></i>Reset
                                </button>
                                <button type="submit" class="btn btn-info">
                                    <i class="fas fa-save me-1"></i>Save Storage Settings
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Notifications Settings -->
            <div class="tab-pane fade" id="notifications" role="tabpanel">
                <div class="card border-0">
                    <div class="card-body">
                        <form id="notificationSettingsForm">
                            <div class="row">
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-bell me-2 text-primary"></i>Notification Preferences</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="notifyGenerationComplete" checked>
                                            <label class="form-check-label" for="notifyGenerationComplete">
                                                Generation Complete
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="notifyBatchComplete" checked>
                                            <label class="form-check-label" for="notifyBatchComplete">
                                                Batch Operations Complete
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="notifyErrors" checked>
                                            <label class="form-check-label" for="notifyErrors">
                                                Errors and Failures
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="notifySystemHealth">
                                            <label class="form-check-label" for="notifySystemHealth">
                                                System Health Issues
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-envelope me-2 text-info"></i>Delivery Methods</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="browserNotifications" checked>
                                            <label class="form-check-label" for="browserNotifications">
                                                Browser Notifications
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="emailNotifications">
                                            <label class="form-check-label" for="emailNotifications">
                                                Email Notifications
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3" id="emailConfig" style="display: none;">
                                        <label for="notificationEmail" class="form-label">Email Address</label>
                                        <input type="email" class="form-control" id="notificationEmail" 
                                               placeholder="your@email.com">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="webhookNotifications">
                                            <label class="form-check-label" for="webhookNotifications">
                                                Webhook Notifications
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3" id="webhookConfig" style="display: none;">
                                        <label for="webhookUrl" class="form-label">Webhook URL</label>
                                        <input type="url" class="form-control" id="webhookUrl" 
                                               placeholder="https://your-webhook-url.com">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <button type="button" class="btn btn-outline-info me-md-2" onclick="testNotifications()">
                                    <i class="fas fa-bell me-1"></i>Test Notifications
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-1"></i>Save Notification Settings
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- YouTube Settings -->
            <div class="tab-pane fade" id="youtube" role="tabpanel">
                <div class="card border-0">
                    <div class="card-body">
                        <form id="youtubeSettingsForm">
                            <div class="row">
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fab fa-youtube text-danger me-2"></i>Channel Defaults</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <label for="defaultChannelCategory" class="form-label">Default Category</label>
                                        <select class="form-select" id="defaultChannelCategory">
                                            <option value="10" selected>Music</option>
                                            <option value="1">Film & Animation</option>
                                            <option value="2">Autos & Vehicles</option>
                                            <option value="15">Pets & Animals</option>
                                            <option value="17">Sports</option>
                                            <option value="19">Travel & Events</option>
                                            <option value="20">Gaming</option>
                                            <option value="22">People & Blogs</option>
                                            <option value="23">Comedy</option>
                                            <option value="24">Entertainment</option>
                                            <option value="25">News & Politics</option>
                                            <option value="26">Howto & Style</option>
                                            <option value="27">Education</option>
                                            <option value="28">Science & Technology</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultPrivacy" class="form-label">Default Privacy</label>
                                        <select class="form-select" id="defaultPrivacy">
                                            <option value="private" selected>Private (Safe Default)</option>
                                            <option value="unlisted">Unlisted</option>
                                            <option value="public">Public</option>
                                        </select>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Private is recommended for initial testing
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultLanguage" class="form-label">Video Language</label>
                                        <select class="form-select" id="defaultLanguage">
                                            <option value="en" selected>English</option>
                                            <option value="lt">Lithuanian</option>
                                            <option value="de">German</option>
                                            <option value="es">Spanish</option>
                                            <option value="fr">French</option>
                                            <option value="it">Italian</option>
                                            <option value="pt">Portuguese</option>
                                            <option value="ru">Russian</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultLicense" class="form-label">License</label>
                                        <select class="form-select" id="defaultLicense">
                                            <option value="youtube" selected>Standard YouTube License</option>
                                            <option value="creativeCommon">Creative Commons</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-cogs text-success me-2"></i>Upload Settings</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="autoUpload" checked>
                                            <label class="form-check-label" for="autoUpload">
                                                Auto-upload Generated Content
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableComments" checked>
                                            <label class="form-check-label" for="enableComments">
                                                Enable Comments by Default
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableRatings" checked>
                                            <label class="form-check-label" for="enableRatings">
                                                Enable Likes/Dislikes
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="notifySubscribers">
                                            <label class="form-check-label" for="notifySubscribers">
                                                Notify Subscribers
                                            </label>
                                        </div>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Disabled by default to avoid spamming during bulk uploads
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="uploadDelay" class="form-label">Delay Between Uploads (minutes)</label>
                                        <input type="number" class="form-control" id="uploadDelay" min="1" max="1440" value="5">
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Prevents rate limiting. Recommended: 5-15 minutes
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12 mb-4">
                                    <h5><i class="fas fa-robot text-primary me-2"></i>Monetization & Analytics</h5>
                                    <hr>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="enableMonetization">
                                                <label class="form-check-label" for="enableMonetization">
                                                    Enable Monetization (when eligible)
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="trackAnalytics" checked>
                                                <label class="form-check-label" for="trackAnalytics">
                                                    Track Performance Analytics
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <label for="targetAudience" class="form-label">Target Audience</label>
                                            <select class="form-select" id="targetAudience">
                                                <option value="general" selected>General Audience</option>
                                                <option value="kids">Made for Kids</option>
                                                <option value="not_kids">Not Made for Kids</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label for="contentRating" class="form-label">Content Rating</label>
                                            <select class="form-select" id="contentRating">
                                                <option value="none" selected>None</option>
                                                <option value="mild">Mild Language</option>
                                                <option value="moderate">Moderate Content</option>
                                                <option value="mature">Mature Themes</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label for="paidPromotion" class="form-label">Paid Promotion</label>
                                            <select class="form-select" id="paidPromotion">
                                                <option value="no" selected>No Paid Promotion</option>
                                                <option value="yes">Contains Paid Promotion</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <button type="button" class="btn btn-outline-secondary me-md-2" onclick="resetYouTubeSettings()">
                                    <i class="fas fa-undo me-1"></i>Reset
                                </button>
                                <button type="submit" class="btn btn-danger">
                                    <i class="fas fa-save me-1"></i>Save YouTube Settings
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Thumbnail Settings -->
            <div class="tab-pane fade" id="thumbnails" role="tabpanel">
                <div class="card border-0">
                    <div class="card-body">
                        <form id="thumbnailSettingsForm">
                            <div class="row">
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-image text-primary me-2"></i>🍌 Nano-Banana Generation</h5>
                                    <hr>
                                    
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle me-2"></i>
                                        Using <strong>Gemini 2.5 Flash Image</strong> for professional thumbnail generation
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="thumbnailStyle" class="form-label">Default Style</label>
                                        <select class="form-select" id="thumbnailStyle">
                                            <option value="modern" selected>Modern & Clean</option>
                                            <option value="vibrant">Vibrant & Colorful</option>
                                            <option value="dark">Dark & Moody</option>
                                            <option value="minimalist">Minimalist</option>
                                            <option value="neon">Neon & Cyberpunk</option>
                                            <option value="vintage">Vintage & Retro</option>
                                            <option value="abstract">Abstract Art</option>
                                            <option value="nature">Nature & Organic</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="thumbnailResolution" class="form-label">Resolution</label>
                                        <select class="form-select" id="thumbnailResolution">
                                            <option value="1280x720" selected>1280x720 (YouTube Standard)</option>
                                            <option value="1920x1080">1920x1080 (Full HD)</option>
                                        </select>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            YouTube recommends 1280x720 with 16:9 aspect ratio
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="thumbnailQuality" class="form-label">Quality</label>
                                        <select class="form-select" id="thumbnailQuality">
                                            <option value="standard">Standard</option>
                                            <option value="high" selected>High Quality</option>
                                            <option value="premium">Premium (Slower)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="includeTitle" checked>
                                            <label class="form-check-label" for="includeTitle">
                                                Include Track Title in Thumbnail
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="includeBranding" checked>
                                            <label class="form-check-label" for="includeBranding">
                                                Include Channel Branding
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-palette text-success me-2"></i>Design Preferences</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <label for="primaryColor" class="form-label">Primary Brand Color</label>
                                        <div class="input-group">
                                            <input type="color" class="form-control form-control-color" id="primaryColor" value="#667eea">
                                            <input type="text" class="form-control" id="primaryColorHex" value="#667eea">
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="secondaryColor" class="form-label">Secondary Color</label>
                                        <div class="input-group">
                                            <input type="color" class="form-control form-control-color" id="secondaryColor" value="#764ba2">
                                            <input type="text" class="form-control" id="secondaryColorHex" value="#764ba2">
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="fontStyle" class="form-label">Text Style</label>
                                        <select class="form-select" id="fontStyle">
                                            <option value="bold" selected>Bold & Modern</option>
                                            <option value="elegant">Elegant & Thin</option>
                                            <option value="playful">Playful & Rounded</option>
                                            <option value="classic">Classic & Serif</option>
                                            <option value="techno">Techno & Futuristic</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="thumbnailTemplate" class="form-label">Template Preference</label>
                                        <select class="form-select" id="thumbnailTemplate">
                                            <option value="auto" selected>Auto-select Best Template</option>
                                            <option value="split_screen">Split Screen Design</option>
                                            <option value="center_focus">Center Focus</option>
                                            <option value="overlay_text">Text Overlay</option>
                                            <option value="minimalist">Minimalist Design</option>
                                            <option value="collage">Musical Collage</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="clickabilityOptimization" class="form-label">Clickability Optimization</label>
                                        <select class="form-select" id="clickabilityOptimization">
                                            <option value="high" selected>High (Attention-grabbing)</option>
                                            <option value="medium">Medium (Balanced)</option>
                                            <option value="low">Low (Subtle)</option>
                                        </select>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Higher optimization may look more "clickbait-y" but improves CTR
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12 mb-4">
                                    <h5><i class="fas fa-magic text-warning me-2"></i>AI Enhancement</h5>
                                    <hr>
                                    
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="aiColorHarmony" checked>
                                                <label class="form-check-label" for="aiColorHarmony">
                                                    AI Color Harmony
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="aiComposition" checked>
                                                <label class="form-check-label" for="aiComposition">
                                                    AI Composition Optimization
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="aiTextPlacement" checked>
                                                <label class="form-check-label" for="aiTextPlacement">
                                                    AI Text Placement
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="creativityLevel" class="form-label">AI Creativity Level</label>
                                            <input type="range" class="form-range" id="creativityLevel" min="0.1" max="1.0" step="0.1" value="0.7">
                                            <div class="d-flex justify-content-between">
                                                <small class="text-muted">Conservative</small>
                                                <small class="text-muted" id="creativityValue">70%</small>
                                                <small class="text-muted">Highly Creative</small>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="genreAdaptation" class="form-label">Genre Adaptation</label>
                                            <select class="form-select" id="genreAdaptation">
                                                <option value="strict">Strict Genre Matching</option>
                                                <option value="adaptive" selected>Adaptive to Genre</option>
                                                <option value="creative">Creative Interpretation</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <button type="button" class="btn btn-outline-secondary me-md-2" onclick="previewThumbnail()">
                                    <i class="fas fa-eye me-1"></i>Preview Sample
                                </button>
                                <button type="button" class="btn btn-outline-secondary me-md-2" onclick="resetThumbnailSettings()">
                                    <i class="fas fa-undo me-1"></i>Reset
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-1"></i>Save Thumbnail Settings
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- SEO Settings -->
            <div class="tab-pane fade" id="seo" role="tabpanel">
                <div class="card border-0">
                    <div class="card-body">
                        <form id="seoSettingsForm">
                            <div class="row">
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-search text-primary me-2"></i>Title Optimization</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <label for="titleStrategy" class="form-label">Title Strategy</label>
                                        <select class="form-select" id="titleStrategy">
                                            <option value="keyword_first" selected>Keyword-First Approach</option>
                                            <option value="emotional">Emotional Hook</option>
                                            <option value="descriptive">Descriptive & Clear</option>
                                            <option value="branded">Branded Approach</option>
                                            <option value="trending">Trending Keywords</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="titleLength" class="form-label">Optimal Title Length</label>
                                        <select class="form-select" id="titleLength">
                                            <option value="short">Short (30-40 chars)</option>
                                            <option value="medium" selected>Medium (40-60 chars)</option>
                                            <option value="long">Long (60-100 chars)</option>
                                        </select>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            YouTube truncates titles after ~60 characters on mobile
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="includeGenreInTitle" checked>
                                            <label class="form-check-label" for="includeGenreInTitle">
                                                Include Genre in Title
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="includeMoodInTitle">
                                            <label class="form-check-label" for="includeMoodInTitle">
                                                Include Mood Descriptors
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="useEmojisInTitle">
                                            <label class="form-check-label" for="useEmojisInTitle">
                                                Use Emojis in Titles
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-tags text-success me-2"></i>Tags & Keywords</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <label for="keywordDensity" class="form-label">Keyword Density Strategy</label>
                                        <select class="form-select" id="keywordDensity">
                                            <option value="low">Low Density (Natural)</option>
                                            <option value="medium" selected>Medium Density (Balanced)</option>
                                            <option value="high">High Density (SEO-focused)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="maxTags" class="form-label">Maximum Tags per Video</label>
                                        <input type="number" class="form-control" id="maxTags" min="5" max="15" value="10">
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            YouTube allows 500 characters total for tags
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="tagLanguages" class="form-label">Tag Languages</label>
                                        <select class="form-select" id="tagLanguages" multiple>
                                            <option value="en" selected>English</option>
                                            <option value="lt">Lithuanian</option>
                                            <option value="de">German</option>
                                            <option value="es">Spanish</option>
                                            <option value="fr">French</option>
                                        </select>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Hold Ctrl/Cmd to select multiple languages
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="includeLongTailKeywords" checked>
                                            <label class="form-check-label" for="includeLongTailKeywords">
                                                Include Long-tail Keywords
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="includeCompetitorTags">
                                            <label class="form-check-label" for="includeCompetitorTags">
                                                Analyze Competitor Tags
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12 mb-4">
                                    <h5><i class="fas fa-align-left text-warning me-2"></i>Description Templates</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <label for="descriptionTemplate" class="form-label">Description Template</label>
                                        <select class="form-select" id="descriptionTemplate">
                                            <option value="minimal">Minimal (Track info only)</option>
                                            <option value="standard" selected>Standard (Track + Channel info)</option>
                                            <option value="seo_optimized">SEO Optimized (Keywords + Call-to-action)</option>
                                            <option value="comprehensive">Comprehensive (Full details)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="customDescription" class="form-label">Custom Description Template</label>
                                        <textarea class="form-control" id="customDescription" rows="6" placeholder="Use variables: {title}, {genre}, {mood}, {bpm}, {key}, {channel_name}, {subscribe_link}">🎵 {title}

Genre: {genre}
Mood: {mood}
BPM: {bpm}
Key: {key}

Perfect for studying, working, relaxing, or just enjoying great music!

Subscribe for more amazing tracks: {subscribe_link}

#music #{genre} #beats #chill #study #relax</textarea>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="includeTimestamps">
                                                <label class="form-check-label" for="includeTimestamps">
                                                    Include Track Timestamps
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="includeCredits" checked>
                                                <label class="form-check-label" for="includeCredits">
                                                    Include AI Generation Credits
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="includeSocialLinks" checked>
                                                <label class="form-check-label" for="includeSocialLinks">
                                                    Include Social Media Links
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="includeCallToAction" checked>
                                                <label class="form-check-label" for="includeCallToAction">
                                                    Include Subscribe Call-to-Action
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <button type="button" class="btn btn-outline-secondary me-md-2" onclick="previewDescription()">
                                    <i class="fas fa-eye me-1"></i>Preview Description
                                </button>
                                <button type="button" class="btn btn-outline-secondary me-md-2" onclick="resetSEOSettings()">
                                    <i class="fas fa-undo me-1"></i>Reset
                                </button>
                                <button type="submit" class="btn btn-success">
                                    <i class="fas fa-save me-1"></i>Save SEO Settings
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Automation Settings -->
            <div class="tab-pane fade" id="automation" role="tabpanel">
                <div class="card border-0">
                    <div class="card-body">
                        <form id="automationSettingsForm">
                            <div class="row">
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-robot text-primary me-2"></i>Scheduling</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableScheduling" checked>
                                            <label class="form-check-label" for="enableScheduling">
                                                Enable Automated Scheduling
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="uploadFrequency" class="form-label">Upload Frequency</label>
                                        <select class="form-select" id="uploadFrequency">
                                            <option value="daily" selected>Daily</option>
                                            <option value="every_2_days">Every 2 Days</option>
                                            <option value="every_3_days">Every 3 Days</option>
                                            <option value="weekly">Weekly</option>
                                            <option value="twice_weekly">Twice Weekly</option>
                                            <option value="custom">Custom Schedule</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="uploadTime" class="form-label">Preferred Upload Time</label>
                                        <input type="time" class="form-control" id="uploadTime" value="14:00">
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Based on your timezone: Europe/Vilnius
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="timeZoneOptimization" class="form-label">Timezone Optimization</label>
                                        <select class="form-select" id="timeZoneOptimization">
                                            <option value="local" selected>Local Timezone (Europe/Vilnius)</option>
                                            <option value="us_eastern">US Eastern (Peak Hours)</option>
                                            <option value="utc">UTC (Global)</option>
                                            <option value="auto">Auto-detect Best Time</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="batchSize" class="form-label">Batch Generation Size</label>
                                        <select class="form-select" id="batchSize">
                                            <option value="1">1 track per batch</option>
                                            <option value="3" selected>3 tracks per batch</option>
                                            <option value="5">5 tracks per batch</option>
                                            <option value="10">10 tracks per batch</option>
                                        </select>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Smaller batches = more consistent, larger = more efficient
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-6 mb-4">
                                    <h5><i class="fas fa-cogs text-success me-2"></i>Workflow Automation</h5>
                                    <hr>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="autoGenerate" checked>
                                            <label class="form-check-label" for="autoGenerate">
                                                Auto-generate Music
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="autoCreateThumbnails" checked>
                                            <label class="form-check-label" for="autoCreateThumbnails">
                                                Auto-create Thumbnails
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="autoOptimizeSEO" checked>
                                            <label class="form-check-label" for="autoOptimizeSEO">
                                                Auto-optimize SEO
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="autoUploadYoutube">
                                            <label class="form-check-label" for="autoUploadYoutube">
                                                Auto-upload to YouTube
                                            </label>
                                        </div>
                                        <div class="form-text">
                                            <i class="fas fa-warning text-warning me-1"></i>
                                            Requires YouTube API setup and channel authentication
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="autoAnalytics" checked>
                                            <label class="form-check-label" for="autoAnalytics">
                                                Auto-track Performance
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12 mb-4">
                                    <h5><i class="fas fa-chart-line text-warning me-2"></i>Performance & Safety</h5>
                                    <hr>
                                    
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <label for="errorHandling" class="form-label">Error Handling</label>
                                            <select class="form-select" id="errorHandling">
                                                <option value="retry" selected>Retry on Failure</option>
                                                <option value="skip">Skip Failed Items</option>
                                                <option value="pause">Pause on Error</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label for="maxRetries" class="form-label">Max Retry Attempts</label>
                                            <input type="number" class="form-control" id="maxRetries" min="1" max="5" value="3">
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label for="cooldownPeriod" class="form-label">Cooldown Period (minutes)</label>
                                            <input type="number" class="form-control" id="cooldownPeriod" min="1" max="60" value="5">
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="enableRateLimiting" checked>
                                                <label class="form-check-label" for="enableRateLimiting">
                                                    Enable Rate Limiting Protection
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="enableNotifications" checked>
                                                <label class="form-check-label" for="enableNotifications">
                                                    Enable Status Notifications
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle me-2"></i>
                                        <strong>24/7 Operation:</strong> These settings enable continuous operation. 
                                        Monitor your API usage and YouTube channel performance regularly.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <button type="button" class="btn btn-outline-warning" onclick="testAutomation()">
                                    <i class="fas fa-play me-1"></i>Test Automation
                                </button>
                                <button type="button" class="btn btn-outline-secondary me-md-2" onclick="resetAutomationSettings()">
                                    <i class="fas fa-undo me-1"></i>Reset
                                </button>
                                <button type="submit" class="btn btn-warning">
                                    <i class="fas fa-save me-1"></i>Save Automation Settings
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Security Settings -->
            <div class="tab-pane fade" id="security" role="tabpanel">
                <div class="card border-0">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-6 mb-4">
                                <h5><i class="fas fa-lock me-2 text-danger"></i>Authentication</h5>
                                <hr>
                                
                                <form id="passwordForm">
                                    <div class="mb-3">
                                        <label for="currentPassword" class="form-label">Current Password</label>
                                        <input type="password" class="form-control" id="currentPassword">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="newPassword" class="form-label">New Password</label>
                                        <input type="password" class="form-control" id="newPassword">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="confirmPassword" class="form-label">Confirm Password</label>
                                        <input type="password" class="form-control" id="confirmPassword">
                                    </div>
                                    
                                    <button type="submit" class="btn btn-danger">
                                        <i class="fas fa-key me-1"></i>Change Password
                                    </button>
                                </form>
                            </div>
                            
                            <div class="col-lg-6 mb-4">
                                <h5><i class="fas fa-shield-alt me-2 text-success"></i>Security Options</h5>
                                <hr>
                                
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="sessionTimeout" checked>
                                        <label class="form-check-label" for="sessionTimeout">
                                            Auto Session Timeout
                                        </label>
                                    </div>
                                    <div class="form-text">Automatically log out after 30 minutes of inactivity</div>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="apiKeyRotation">
                                        <label class="form-check-label" for="apiKeyRotation">
                                            Auto API Key Rotation
                                        </label>
                                    </div>
                                    <div class="form-text">Remind to rotate API keys monthly</div>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="auditLogging" checked>
                                        <label class="form-check-label" for="auditLogging">
                                            Audit Logging
                                        </label>
                                    </div>
                                    <div class="form-text">Log all admin actions</div>
                                </div>
                                
                                <div class="alert alert-warning mt-3">
                                    <i class="fas fa-exclamation-triangle me-2"></i>
                                    <strong>Security Reminder:</strong> Change default passwords and keep API keys secure.
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-12">
                                <h5><i class="fas fa-history me-2 text-info"></i>Security Log</h5>
                                <hr>
                                
                                <div class="table-responsive">
                                    <table class="table table-sm">
                                        <thead>
                                            <tr>
                                                <th>Event</th>
                                                <th>IP Address</th>
                                                <th>User Agent</th>
                                                <th>Timestamp</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge bg-success">Login Success</span></td>
                                                <td>192.168.1.100</td>
                                                <td>Chrome 118.0.0.0</td>
                                                <td>2025-09-13 12:30:15</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-info">Settings Change</span></td>
                                                <td>192.168.1.100</td>
                                                <td>Chrome 118.0.0.0</td>
                                                <td>2025-09-13 12:25:43</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Settings JavaScript
    
    // Form submissions
    document.getElementById('generalSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettings('general');
    });
    
    document.getElementById('generationSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettings('generation');
    });
    
    document.getElementById('storageSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettings('storage');
    });
    
    document.getElementById('notificationSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettings('notifications');
    });
    
    document.getElementById('passwordForm').addEventListener('submit', function(e) {
        e.preventDefault();
        changePassword();
    });
    
    function saveSettings(category) {
        const button = event.target.querySelector('button[type="submit"]');
        const originalText = button.innerHTML;
        
        showLoading(button);
        
        setTimeout(() => {
            hideLoading(button, originalText);
            showToast(`${category.charAt(0).toUpperCase() + category.slice(1)} settings saved!`, 'success');
        }, 1500);
    }
    
    function changePassword() {
        const current = document.getElementById('currentPassword').value;
        const newPass = document.getElementById('newPassword').value;
        const confirm = document.getElementById('confirmPassword').value;
        
        if (!current || !newPass || !confirm) {
            showToast('Please fill all password fields', 'warning');
            return;
        }
        
        if (newPass !== confirm) {
            showToast('New passwords do not match', 'error');
            return;
        }
        
        if (newPass.length < 8) {
            showToast('Password must be at least 8 characters', 'warning');
            return;
        }
        
        showToast('Password changed successfully!', 'success');
        document.getElementById('passwordForm').reset();
    }
    
    // Refresh interval slider
    document.getElementById('refreshInterval').addEventListener('input', function() {
        document.getElementById('refreshValue').textContent = this.value + 's';
    });
    
    // Email notifications toggle
    document.getElementById('emailNotifications').addEventListener('change', function() {
        const emailConfig = document.getElementById('emailConfig');
        emailConfig.style.display = this.checked ? 'block' : 'none';
    });
    
    // Webhook notifications toggle
    document.getElementById('webhookNotifications').addEventListener('change', function() {
        const webhookConfig = document.getElementById('webhookConfig');
        webhookConfig.style.display = this.checked ? 'block' : 'none';
    });
    
    // Cleanup functions
    function cleanupTempFiles() {
        Swal.fire({
            title: 'Clean Temporary Files?',
            text: 'This will delete all temporary files (45 MB). This action cannot be undone.',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes, clean up!',
            cancelButtonText: 'Cancel'
        }).then((result) => {
            if (result.isConfirmed) {
                showToast('Temporary files cleaned successfully!', 'success');
            }
        });
    }
    
    function optimizeStorage() {
        Swal.fire({
            title: 'Optimize Storage',
            text: 'This will compress and reorganize files for better storage efficiency.',
            icon: 'info',
            showCancelButton: true,
            confirmButtonText: 'Optimize',
            cancelButtonText: 'Cancel'
        }).then((result) => {
            if (result.isConfirmed) {
                showToast('Storage optimization completed!', 'success');
            }
        });
    }
    
    function confirmFullCleanup() {
        Swal.fire({
            title: 'Delete Old Projects?',
            html: 'This will permanently delete all projects older than 30 days.<br><strong>This action cannot be undone!</strong>',
            icon: 'error',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            confirmButtonText: 'Yes, delete them!',
            cancelButtonText: 'Cancel'
        }).then((result) => {
            if (result.isConfirmed) {
                showToast('Old projects deleted successfully!', 'success');
            }
        });
    }
    
    function testNotifications() {
        showToast('Test notification sent!', 'info');
        
        // Test browser notification if enabled
        if (document.getElementById('browserNotifications').checked) {
            if (Notification.permission === 'granted') {
                new Notification('Test Notification', {
                    body: 'This is a test notification from Autonominis Muzikantas',
                    icon: '/static/favicon.ico'
                });
            } else if (Notification.permission !== 'denied') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        new Notification('Test Notification', {
                            body: 'This is a test notification from Autonominis Muzikantas',
                            icon: '/static/favicon.ico'
                        });
                    }
                });
            }
        }
    }
    
    function checkUpdates() {
        const button = event.target;
        const originalText = button.innerHTML;
        
        showLoading(button);
        
        setTimeout(() => {
            hideLoading(button, originalText);
            Swal.fire({
                title: 'System Up to Date',
                text: 'You are running the latest version (v1.2.0)',
                icon: 'success'
            });
        }, 2000);
    }
    
    function systemDiagnostics() {
        const button = event.target;
        const originalText = button.innerHTML;
        
        showLoading(button);
        
        setTimeout(() => {
            hideLoading(button, originalText);
            Swal.fire({
                title: 'System Diagnostics',
                html: `
                    <div class="text-start">
                        <h6>System Health Check:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-check text-success me-2"></i>Web Server: Running</li>
                            <li><i class="fas fa-check text-success me-2"></i>Database: Connected</li>
                            <li><i class="fas fa-check text-success me-2"></i>File System: Accessible</li>
                            <li><i class="fas fa-exclamation text-warning me-2"></i>MoviePy: Limited functionality</li>
                            <li><i class="fas fa-times text-danger me-2"></i>API Keys: Not configured</li>
                        </ul>
                        
                        <h6>Recommendations:</h6>
                        <ul class="small">
                            <li>Configure API keys for full functionality</li>
                            <li>Consider upgrading MoviePy version</li>
                            <li>Enable automatic backups</li>
                        </ul>
                    </div>
                `,
                width: 500,
                confirmButtonText: 'Close'
            });
        }, 3000);
    }
    
    function backupSettings() {
        showToast('Settings backup created successfully!', 'success');
        
        // Create and download backup file
        const settings = {
            general: { /* settings data */ },
            generation: { /* settings data */ },
            storage: { /* settings data */ },
            notifications: { /* settings data */ },
            timestamp: new Date().toISOString()
        };
        
        const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `settings_backup_${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        URL.revokeObjectURL(url);
    }
    
    // Reset functions
    function resetGeneralSettings() {
        if (confirm('Reset all general settings to defaults?')) {
            document.getElementById('generalSettingsForm').reset();
            showToast('General settings reset to defaults', 'info');
        }
    }
    
    function resetGenerationSettings() {
        if (confirm('Reset all generation settings to defaults?')) {
            document.getElementById('generationSettingsForm').reset();
            showToast('Generation settings reset to defaults', 'info');
        }
    }
    
    function resetStorageSettings() {
        if (confirm('Reset all storage settings to defaults?')) {
            document.getElementById('storageSettingsForm').reset();
            showToast('Storage settings reset to defaults', 'info');
        }
    }
    
    // ==========================================
    // NEW SETTINGS TABS JAVASCRIPT FUNCTIONALITY
    // ==========================================
    
    // YouTube Settings Form Submission
    document.getElementById('youtubeSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettings('youtube');
    });
    
    // Thumbnails Settings Form Submission
    document.getElementById('thumbnailSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettings('thumbnails');
    });
    
    // SEO Settings Form Submission
    document.getElementById('seoSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettings('seo');
    });
    
    // Automation Settings Form Submission
    document.getElementById('automationSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettings('automation');
    });
    
    // ==========================================
    // THUMBNAIL SETTINGS FUNCTIONALITY
    // ==========================================
    
    // Color picker synchronization
    document.getElementById('primaryColor').addEventListener('change', function() {
        document.getElementById('primaryColorHex').value = this.value;
    });
    
    document.getElementById('primaryColorHex').addEventListener('change', function() {
        const hex = this.value;
        if (/^#([0-9A-F]{3}){1,2}$/i.test(hex)) {
            document.getElementById('primaryColor').value = hex;
        }
    });
    
    document.getElementById('secondaryColor').addEventListener('change', function() {
        document.getElementById('secondaryColorHex').value = this.value;
    });
    
    document.getElementById('secondaryColorHex').addEventListener('change', function() {
        const hex = this.value;
        if (/^#([0-9A-F]{3}){1,2}$/i.test(hex)) {
            document.getElementById('secondaryColor').value = hex;
        }
    });
    
    // Creativity level slider
    document.getElementById('creativityLevel').addEventListener('input', function() {
        const value = Math.round(this.value * 100);
        document.getElementById('creativityValue').textContent = value + '%';
    });
    
    // Thumbnail preview function
    function previewThumbnail() {
        const button = event.target;
        const originalText = button.innerHTML;
        
        showLoading(button);
        
        // Get current settings
        const settings = {
            style: document.getElementById('thumbnailStyle').value,
            resolution: document.getElementById('thumbnailResolution').value,
            quality: document.getElementById('thumbnailQuality').value,
            includeTitle: document.getElementById('includeTitle').checked,
            includeBranding: document.getElementById('includeBranding').checked,
            primaryColor: document.getElementById('primaryColor').value,
            secondaryColor: document.getElementById('secondaryColor').value,
            fontStyle: document.getElementById('fontStyle').value,
            template: document.getElementById('thumbnailTemplate').value,
            optimization: document.getElementById('clickabilityOptimization').value,
            creativity: document.getElementById('creativityLevel').value
        };
        
        // Simulate thumbnail generation
        setTimeout(() => {
            hideLoading(button, originalText);
            
            Swal.fire({
                title: 'Thumbnail Preview',
                html: `
                    <div class="text-start">
                        <h6 class="mb-3">🍌 Nano-Banana Generated Preview:</h6>
                        <div class="bg-light p-3 rounded mb-3" style="aspect-ratio: 16/9; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, ${settings.primaryColor}, ${settings.secondaryColor});">
                            <div class="text-white text-center">
                                <h5 class="mb-1" style="font-weight: bold;">${settings.includeTitle ? 'Lo-Fi Hip Hop Beat' : 'Music Track'}</h5>
                                <small>${settings.includeBranding ? 'Autonominis Muzikantas' : ''}</small>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <small><strong>Style:</strong> ${settings.style}</small><br>
                                <small><strong>Resolution:</strong> ${settings.resolution}</small><br>
                                <small><strong>Quality:</strong> ${settings.quality}</small><br>
                                <small><strong>Template:</strong> ${settings.template}</small>
                            </div>
                            <div class="col-6">
                                <small><strong>Colors:</strong> ${settings.primaryColor} / ${settings.secondaryColor}</small><br>
                                <small><strong>Font:</strong> ${settings.fontStyle}</small><br>
                                <small><strong>Optimization:</strong> ${settings.optimization}</small><br>
                                <small><strong>Creativity:</strong> ${Math.round(settings.creativity * 100)}%</small>
                            </div>
                        </div>
                    </div>
                `,
                width: 500,
                confirmButtonText: 'Looks Great!'
            });
        }, 2000);
    }
    
    // ==========================================
    // SEO SETTINGS FUNCTIONALITY
    // ==========================================
    
    // Description preview function
    function previewDescription() {
        const template = document.getElementById('customDescription').value;
        const includeTimestamps = document.getElementById('includeTimestamps').checked;
        const includeCredits = document.getElementById('includeCredits').checked;
        const includeSocialLinks = document.getElementById('includeSocialLinks').checked;
        const includeCallToAction = document.getElementById('includeCallToAction').checked;
        
        // Sample data for preview
        const sampleData = {
            title: 'Chill Lo-Fi Hip Hop Beat',
            genre: 'Lo-Fi Hip Hop',
            mood: 'Relaxing',
            bpm: '85',
            key: 'C Minor',
            channel_name: 'Autonominis Muzikantas',
            subscribe_link: 'https://youtube.com/@AutonominisMuzikantas?sub_confirmation=1'
        };
        
        // Replace variables in template
        let preview = template;
        Object.keys(sampleData).forEach(key => {
            preview = preview.replace(new RegExp(`{${key}}`, 'g'), sampleData[key]);
        });
        
        // Add optional sections
        if (includeTimestamps) {
            preview += "\n\n⏰ Timestamps:\n0:00 - Intro\n0:30 - Main Beat\n2:15 - Bridge\n2:45 - Outro";
        }
        
        if (includeCredits) {
            preview += "\n\n🤖 Generated with AI\n💫 Nano-Banana (Gemini 2.5 Flash Image)";
        }
        
        if (includeSocialLinks) {
            preview += "\n\n📱 Follow us:\n🎵 YouTube: @AutonominisMuzikantas\n📧 Contact: info@autonominis.lt";
        }
        
        if (includeCallToAction) {
            preview += "\n\n👍 Like this video if you enjoyed it!\n🔔 Subscribe for daily releases!\n💬 Comment what genre you'd like next!";
        }
        
        Swal.fire({
            title: 'Description Preview',
            html: `
                <div class="text-start">
                    <div class="bg-light p-3 rounded" style="max-height: 300px; overflow-y: auto;">
                        <pre style="white-space: pre-wrap; font-family: inherit; margin: 0;">${preview}</pre>
                    </div>
                    <div class="mt-3">
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            Character count: ${preview.length} (YouTube limit: 5,000)
                        </small>
                    </div>
                </div>
            `,
            width: 600,
            confirmButtonText: 'Perfect!'
        });
    }
    
    // ==========================================
    // AUTOMATION SETTINGS FUNCTIONALITY
    // ==========================================
    
    // Test automation function
    function testAutomation() {
        const button = event.target;
        const originalText = button.innerHTML;
        
        showLoading(button);
        
        // Get automation settings
        const settings = {
            scheduling: document.getElementById('enableScheduling').checked,
            frequency: document.getElementById('uploadFrequency').value,
            time: document.getElementById('uploadTime').value,
            batchSize: document.getElementById('batchSize').value,
            autoGenerate: document.getElementById('autoGenerate').checked,
            autoThumbnails: document.getElementById('autoCreateThumbnails').checked,
            autoSEO: document.getElementById('autoOptimizeSEO').checked,
            autoUpload: document.getElementById('autoUploadYoutube').checked
        };
        
        setTimeout(() => {
            hideLoading(button, originalText);
            
            let testResults = '<div class="text-start"><h6>🔄 Automation Test Results:</h6><ul class="list-unstyled">';
            
            if (settings.scheduling) {
                testResults += '<li><i class="fas fa-check text-success me-2"></i>Scheduling: Active</li>';
            } else {
                testResults += '<li><i class="fas fa-times text-danger me-2"></i>Scheduling: Disabled</li>';
            }
            
            if (settings.autoGenerate) {
                testResults += '<li><i class="fas fa-check text-success me-2"></i>Auto Music Generation: Ready</li>';
            } else {
                testResults += '<li><i class="fas fa-exclamation text-warning me-2"></i>Auto Music Generation: Manual mode</li>';
            }
            
            if (settings.autoThumbnails) {
                testResults += '<li><i class="fas fa-check text-success me-2"></i>Auto Thumbnails (Nano-Banana): Ready</li>';
            } else {
                testResults += '<li><i class="fas fa-exclamation text-warning me-2"></i>Auto Thumbnails: Manual mode</li>';
            }
            
            if (settings.autoSEO) {
                testResults += '<li><i class="fas fa-check text-success me-2"></li>Auto SEO Optimization: Ready</li>';
            } else {
                testResults += '<li><i class="fas fa-exclamation text-warning me-2"></i>Auto SEO: Manual mode</li>';
            }
            
            if (settings.autoUpload) {
                testResults += '<li><i class="fas fa-exclamation text-warning me-2"></i>Auto YouTube Upload: Requires API setup</li>';
            } else {
                testResults += '<li><i class="fas fa-exclamation text-warning me-2"></i>Auto Upload: Disabled for safety</li>';
            }
            
            testResults += '</ul>';
            testResults += `<div class="alert alert-info mt-3"><i class="fas fa-clock me-2"></i>Next scheduled run: ${settings.frequency} at ${settings.time}</div>`;
            testResults += '</div>';
            
            Swal.fire({
                title: '🚀 Automation Test Complete',
                html: testResults,
                width: 500,
                confirmButtonText: 'Start Automation!'
            });
        }, 3000);
    }
    
    // ==========================================
    // RESET FUNCTIONS FOR NEW TABS
    // ==========================================
    
    function resetYouTubeSettings() {
        if (confirm('Reset all YouTube settings to YouTube best practice defaults?')) {
            // Reset to YouTube best practices
            document.getElementById('defaultChannelCategory').value = '10'; // Music
            document.getElementById('defaultPrivacy').value = 'private'; // Safe default
            document.getElementById('defaultLanguage').value = 'en';
            document.getElementById('defaultLicense').value = 'youtube';
            document.getElementById('autoUpload').checked = true;
            document.getElementById('enableComments').checked = true;
            document.getElementById('enableRatings').checked = true;
            document.getElementById('notifySubscribers').checked = false; // Prevent spam
            document.getElementById('uploadDelay').value = '5';
            document.getElementById('enableMonetization').checked = false;
            document.getElementById('trackAnalytics').checked = true;
            document.getElementById('targetAudience').value = 'general';
            document.getElementById('contentRating').value = 'none';
            document.getElementById('paidPromotion').value = 'no';
            
            showToast('YouTube settings reset to best practices', 'info');
        }
    }
    
    function resetThumbnailSettings() {
        if (confirm('Reset all thumbnail settings to optimal defaults?')) {
            // Reset to optimal thumbnail settings
            document.getElementById('thumbnailStyle').value = 'modern';
            document.getElementById('thumbnailResolution').value = '1280x720';
            document.getElementById('thumbnailQuality').value = 'high';
            document.getElementById('includeTitle').checked = true;
            document.getElementById('includeBranding').checked = true;
            document.getElementById('primaryColor').value = '#667eea';
            document.getElementById('primaryColorHex').value = '#667eea';
            document.getElementById('secondaryColor').value = '#764ba2';
            document.getElementById('secondaryColorHex').value = '#764ba2';
            document.getElementById('fontStyle').value = 'bold';
            document.getElementById('thumbnailTemplate').value = 'auto';
            document.getElementById('clickabilityOptimization').value = 'high';
            document.getElementById('aiColorHarmony').checked = true;
            document.getElementById('aiComposition').checked = true;
            document.getElementById('aiTextPlacement').checked = true;
            document.getElementById('creativityLevel').value = '0.7';
            document.getElementById('creativityValue').textContent = '70%';
            document.getElementById('genreAdaptation').value = 'adaptive';
            
            showToast('Thumbnail settings reset to optimal defaults', 'info');
        }
    }
    
    function resetSEOSettings() {
        if (confirm('Reset all SEO settings to YouTube optimization defaults?')) {
            // Reset to SEO best practices
            document.getElementById('titleStrategy').value = 'keyword_first';
            document.getElementById('titleLength').value = 'medium';
            document.getElementById('includeGenreInTitle').checked = true;
            document.getElementById('includeMoodInTitle').checked = false;
            document.getElementById('useEmojisInTitle').checked = false;
            document.getElementById('keywordDensity').value = 'medium';
            document.getElementById('maxTags').value = '10';
            document.getElementById('tagLanguages').selectedIndex = 0; // English only
            document.getElementById('includeLongTailKeywords').checked = true;
            document.getElementById('includeCompetitorTags').checked = false;
            document.getElementById('descriptionTemplate').value = 'standard';
            document.getElementById('includeTimestamps').checked = false;
            document.getElementById('includeCredits').checked = true;
            document.getElementById('includeSocialLinks').checked = true;
            document.getElementById('includeCallToAction').checked = true;
            
            // Reset custom description to standard template
            document.getElementById('customDescription').value = `🎵 {title}\n\nGenre: {genre}\nMood: {mood}\nBPM: {bpm}\nKey: {key}\n\nPerfect for studying, working, relaxing, or just enjoying great music!\n\nSubscribe for more amazing tracks: {subscribe_link}\n\n#music #{genre} #beats #chill #study #relax`;
            
            showToast('SEO settings reset to YouTube optimization defaults', 'info');
        }
    }
    
    function resetAutomationSettings() {
        if (confirm('Reset all automation settings to safe production defaults?')) {
            // Reset to safe production defaults
            document.getElementById('enableScheduling').checked = true;
            document.getElementById('uploadFrequency').value = 'daily';
            document.getElementById('uploadTime').value = '14:00';
            document.getElementById('timeZoneOptimization').value = 'local';
            document.getElementById('batchSize').value = '3';
            document.getElementById('autoGenerate').checked = true;
            document.getElementById('autoCreateThumbnails').checked = true;
            document.getElementById('autoOptimizeSEO').checked = true;
            document.getElementById('autoUploadYoutube').checked = false; // Safe default
            document.getElementById('autoAnalytics').checked = true;
            document.getElementById('errorHandling').value = 'retry';
            document.getElementById('maxRetries').value = '3';
            document.getElementById('cooldownPeriod').value = '5';
            document.getElementById('enableRateLimiting').checked = true;
            document.getElementById('enableNotifications').checked = true;
            
            showToast('Automation settings reset to safe production defaults', 'info');
        }
    }
    
    // ==========================================
    // FORM VALIDATION AND ENHANCEMENT
    // ==========================================
    
    // Enhanced save function with validation
    function saveSettingsWithValidation(category) {
        let isValid = true;
        let errorMessage = '';
        
        // YouTube settings validation
        if (category === 'youtube') {
            const uploadDelay = parseInt(document.getElementById('uploadDelay').value);
            if (uploadDelay < 1 || uploadDelay > 1440) {
                isValid = false;
                errorMessage = 'Upload delay must be between 1-1440 minutes';
            }
        }
        
        // Thumbnail settings validation
        if (category === 'thumbnails') {
            const primaryColor = document.getElementById('primaryColorHex').value;
            const secondaryColor = document.getElementById('secondaryColorHex').value;
            
            if (!/^#([0-9A-F]{3}){1,2}$/i.test(primaryColor)) {
                isValid = false;
                errorMessage = 'Invalid primary color format';
            }
            if (!/^#([0-9A-F]{3}){1,2}$/i.test(secondaryColor)) {
                isValid = false;
                errorMessage = 'Invalid secondary color format';
            }
        }
        
        // SEO settings validation
        if (category === 'seo') {
            const maxTags = parseInt(document.getElementById('maxTags').value);
            if (maxTags < 5 || maxTags > 15) {
                isValid = false;
                errorMessage = 'Maximum tags must be between 5-15';
            }
            
            const customDescription = document.getElementById('customDescription').value;
            if (customDescription.length > 4900) {
                isValid = false;
                errorMessage = 'Custom description too long (YouTube limit: 5000 chars)';
            }
        }
        
        // Automation settings validation
        if (category === 'automation') {
            const maxRetries = parseInt(document.getElementById('maxRetries').value);
            const cooldown = parseInt(document.getElementById('cooldownPeriod').value);
            
            if (maxRetries < 1 || maxRetries > 5) {
                isValid = false;
                errorMessage = 'Max retries must be between 1-5';
            }
            if (cooldown < 1 || cooldown > 60) {
                isValid = false;
                errorMessage = 'Cooldown period must be between 1-60 minutes';
            }
        }
        
        if (!isValid) {
            showToast(errorMessage, 'error');
            return false;
        }
        
        // If validation passes, save the settings
        saveSettings(category);
        return true;
    }
    
    // Update form submissions to use validation
    document.getElementById('youtubeSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettingsWithValidation('youtube');
    });
    
    document.getElementById('thumbnailSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettingsWithValidation('thumbnails');
    });
    
    document.getElementById('seoSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettingsWithValidation('seo');
    });
    
    document.getElementById('automationSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveSettingsWithValidation('automation');
    });
    
    // Initialize settings on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Set initial creativity level display
        const creativityLevel = document.getElementById('creativityLevel');
        if (creativityLevel) {
            const value = Math.round(creativityLevel.value * 100);
            document.getElementById('creativityValue').textContent = value + '%';
        }
        
        // Initialize color picker values
        const primaryColor = document.getElementById('primaryColor');
        const secondaryColor = document.getElementById('secondaryColor');
        if (primaryColor) {
            document.getElementById('primaryColorHex').value = primaryColor.value;
        }
        if (secondaryColor) {
            document.getElementById('secondaryColorHex').value = secondaryColor.value;
        }
        
        showToast('🚀 All settings loaded - Ready for 24/7 YouTube automation!', 'success');
    });
    
</script>
{% endblock %}